
<!DOCTYPE html>

<html>

<head>

	<meta charset="utf8">

	<title>チョコスロ</title>

	<style type="text/css">

		#canvas{
			border: 1px solid gray;
			width: 1100px;

			height: 650px;
			
			text-align:center;
		}
		.score p{
			display:inline-block;
		}
		
	</style>

</head>

<body>



<!-- 通信結果をここに表示 -->

<div id="canvas">
	<h3>リザルト</h3>
	
	<h1 id="result"></h1>
	<div class="score">
		<p>あなたのスコア:</p>
		<p id="myscore">0</p>
	</div>
	<br>
	<div class="score">
		<p>あいてのスコア:</p>
		<p id="enemyscore">0</p>
	</div>
	<form action="title.html">
   		<button>タイトルへ</button>
  	</form>
</div>
	
<audio id="bgm_main" src="teammusic/end.wav" autoplay loop></audio>


<script>	var urlParamStr=window.location.search;
	if(urlParamStr.slice( 0, 1 )=="?")urlParamStr=urlParamStr.slice(1);
	var urlParams = new URLSearchParams(urlParamStr);

	var userID=urlParams.get('id');
	var myscore = document.querySelector("#myscore");
	var enemyscore = document.querySelector("#enemyscore");
	var buttleResult = document.querySelector("#result");

	var resultRequest = new XMLHttpRequest();

	resultRequest.open('GET', 'http://localhost/result.php?id='+userID, false);
	resultRequest.onload = function() {
		if (resultRequest.status === 200) {
				var response = resultRequest.responseText;

				var json = JSON.parse(response);
				
				myscore.innerHTML=json[0];
				enemyscore.innerHTML=json[1];
				if(json[0]>json[1]){
					buttleResult.innerHTML="勝ち";
				}				
				else if(json[0]<json[1]){
					buttleResult.innerHTML="負け";
				}
				else{
					buttleResult.innerHTML="引き分け";
				}
				
			}
	}
	resultRequest.onerror = function() {
		//エラー時の処理
	};
	resultRequest.send();		//POSTの場合は引数に文字列を渡す
	


</script>

</body>

</html>
